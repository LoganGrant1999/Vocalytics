meta:
  product_name: "Vocalytics"
  codename: "TubeWhisper"
  owner: "Logan Gibbons"
  version: "v1.0-MVP"
  date_created: "2025-11-21"
  target_launch: "2025-12-05"
  stack:
    frontend: "React 18 + Vite + Tailwind + React Query"
    backend: "Node.js 20 + Fastify + TypeScript + MCP"
    database: "Supabase (PostgreSQL + Auth + RLS)"
    infrastructure:
      - "Supabase (DB + Auth + Row-level security + Usage)"
      - "Vercel (Serverless functions + Cron)"
      - "MCP Server (fast local dev + ChatGPT app integration)"
    external_apis:
      - "YouTube Data API v3"
      - "OpenAI API (GPT-4o-mini / omni-moderation-latest)"
      - "Stripe Billing"
  environment:
    node_version: "20.x"
    package_manager: "pnpm workspaces"
    backend_entry: "packages/server/src/http/index.ts"
    frontend_entry: "packages/web/src/main.tsx"

problem_statement:
  summary: >
    YouTube creators drown in comments. They waste hours replying,
    struggle to sense audience mood, and miss toxic or high-value feedback.
    YouTube Studio doesn’t provide emotional analytics or AI-assisted replies.
  user_pain_points:
    - "Creators spend 30–90 minutes/day reading comments manually."
    - "Sentiment and tone are invisible in YouTube Studio."
    - "Spam and toxicity bury real fan messages."
    - "Generic AI reply tools don’t match creator voice."
  why_now:
    - "ChatGPT App Store launch gives free distribution."
    - "Creators increasingly expect AI copilots."
    - "OpenAI + YouTube API make sentiment analysis cheap and fast."
    - "Creators already pay for tools that save time."

value_proposition:
  statement: >
    Vocalytics is the emotional analytics and AI co-pilot for YouTube creators—
    one place to measure audience sentiment and instantly draft authentic replies.
  key_benefits:
    - "Instant understanding of audience emotion per video."
    - "Pinpoint what fans love, hate, or want next."
    - "Generate replies in creator’s voice with 1 click."
    - "Save hours per week moderating comments."

target_users:
  primary_persona:
    name: "Indie Creator"
    profile:
      - "10k–250k subs"
      - "1–3 uploads/week"
      - "Reads replies personally"
      - "Comfortable using ChatGPT"
      - "Willing to pay $12–$20/mo for comment automation"
  secondary_personas:
    - "Podcasters uploading to YouTube"
    - "Solo brand marketers"
    - "Micro-creators growing from 2k–10k subs"

success_metrics:
  prelaunch:
    - "10 creator interviews"
    - "3 private beta channels"
  postlaunch:
    - "> 1200 installs by Jan 1"
    - "> 5% paid conversion within 30 days"
    - "> 70% weekly retention (free)"
    - "> 8 NPS from early adopters"
    - "> 95% uptime on API health checks"

mvp_scope:
  scope_summary: >
    Deliver a web app + ChatGPT App where creators connect YouTube,
    view their recent uploaded videos, run fast semantic sentiment analysis,
    generate tone-aligned replies, and upgrade to a Pro plan when free-tier
    limits are exceeded.

core_features:
  F1:
    name: "YouTube OAuth Login"
    description: "Google OAuth2 flow with youtube.readonly permission."
    success: "User connects in under 60 seconds."
  F2:
    name: "Fetch User Videos"
    description: "List latest 10–20 uploads with title, thumbnail, stats."
    success: "Videos appear instantly after OAuth."
  F3:
    name: "Fast Sentiment Analysis (Batch + Heuristic + Caching)"
    description: >
      Using hierarchical batching, heuristics, incremental caching,
      intelligent sampling, and GPT-4o-mini classification.
    success: "1000 comments analyzed in 10–30 seconds."
  F4:
    name: "Persistent Video Analysis Storage"
    description: "Store sentiment & summary for each (user, video)."
    success: "Re-analysis loads instantly and is nearly free."
  F5:
    name: "AI Reply Generation"
    description: "Draft multiple human-like replies per comment."
    success: "≥70% tone alignment with creator personality."
  F6:
    name: "Dashboard Overview"
    description: "Grid of videos + sentiment score + quick stats."
    success: "Users understand channel 'emotional health' at a glance."
  F7:
    name: "Video Detail Page"
    description: "Tabs: Overview (sentiment, summary), Comments, AI Replies."
    success: "Loads analysis in < 5 seconds from cached storage."
  F8:
    name: "Usage Limits + Paywall"
    description: "Free vs Pro enforcement via Supabase usage counters."
    success: "Perfectly enforced limits with Stripe Checkout for upgrade."
  F9:
    name: "ChatGPT App Integration"
    description: "Full MCP bridge: analyze videos, generate replies in ChatGPT."
    success: "ChatGPT app mirrors web functionality."

optional_features:
  - F10:
      name: "Tone Memory"
      description: "Store user writing samples to influence reply generation."
  - F11:
      name: "Sentiment Trends"
      description: "Plot sentiment over time for Pro users."
  - F12:
      name: "Export to CSV"
      description: "Pro users can export comment sentiment data."

ux_flow:
  entry_point: "Connect YouTube → Auto-populate dashboard"
  flows:
    - "User installs app → Google OAuth → Dashboard loads videos"
    - "User clicks ‘Analyze’ → Runs fast batched sentiment pipeline"
    - "Sentiment, top comments, toxicity, and summary appear"
    - "User opens Comments → generates AI replies"
    - "User hits free tier limit → paywall modal → Stripe checkout"
    - "User returns with Pro unlocked: unlimited analysis + advanced tools"
  empty_state:
    message: "No analyses yet — click a video to run your first sentiment analysis."

monetization:
  pricing:
    free:
      price: "$0"
      features:
        - "Analyze 3 videos per month"
        - "10 AI replies/day"
        - "Basic sentiment + summary"
        - "Dashboard of last 10 uploads"
    pro:
      price: "$12/mo"
      features:
        - "Unlimited analysis"
        - "Unlimited replies"
        - "Tone Memory"
        - "Trend analytics"
        - "Export tools"
        - "Priority batching (8x concurrency)"
  billing:
    provider: "Stripe"
    upgrade_flow: "Stripe Checkout → Webhook → Supabase tier=pro"

data_model:
  tables:

    users:
      description: "Creator account + subscription tier"
      columns:
        id: "uuid"
        email: "text"
        tier: "free | pro"
        created_at: "timestamptz"
        stripe_customer_id: "text"
        stripe_subscription_id: "text"
        subscribed_until: "timestamptz"

    user_videos:
      description: "Cached YouTube uploads"
      columns:
        user_id: "uuid"
        video_id: "text"
        title: "text"
        thumbnail_url: "text"
        stats: "jsonb"
        published_at: "timestamptz"
        fetched_at: "timestamptz"

    video_analyses:
      description: "Stored sentiment analyses per (video, user)"
      columns:
        user_id: "uuid"
        video_id: "text"
        sentiment: "jsonb"
        score: "numeric"
        summary: "text"
        top_positive: "jsonb"
        top_negative: "jsonb"
        raw: "jsonb"
        analyzed_at: "timestamptz"

    comment_sentiments:
      description: "Incremental sentiment caching per comment"
      columns:
        user_id: "uuid"
        video_id: "text"
        comment_id: "text"
        text_hash: "text"
        sentiment: "jsonb"
        category: "text"
        intent: "text"
        topics: "text[]"
        toxicity: "numeric"
        created_at: "timestamptz"

api_endpoints:
  - GET /youtube/videos: "List videos"
  - GET /analysis/:videoId: "Fetch stored analysis"
  - POST /analysis/:videoId: "Run fresh sentiment analysis"
  - GET /analysis/trends: "Sentiment over time (Pro)"
  - POST /generate-replies: "Generate AI replies"
  - GET /fetch-comments/:videoId: "Get YouTube comments"
  - POST /billing/checkout: "Stripe Checkout"
  - POST /billing/webhook: "Stripe webhook updates"

frontend_ui:
  pages:
    - LandingPage
    - DashboardPage
    - VideoDetailPage
    - CommentsPage
    - RepliesPage
    - BillingPage
  components:
    - SentimentChart
    - SummaryCard
    - VideoGrid
    - PaywallModal
    - UpgradeBanner
    - AnalysisProgress
    - CommentThread
    - ReplyGenerator

milestones:
  week_1:
    - "OAuth + video fetch"
    - "Dashboard skeleton"
  week_2:
    - "Sentiment engine integration (heuristics + batch GPT)"
    - "Video analysis storage"
  week_3:
    - "Replies + paywall"
    - "Stripe integration"
    - "Frontend polish"
  week_4:
    - "Beta rollout + bug fixes"
    - "ChatGPT app submission"
    - "Public launch"

north_star:
  statement: >
    Become the emotional analytics co-pilot for YouTubers —
    the place creators check first to understand their audience and
    the assistant they trust to help them reply authentically.
